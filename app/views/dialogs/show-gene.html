<md-dialog flex="55">

    <md-toolbar>
      <div class="md-toolbar-tools md-toolbar-accent">
        <h3>{{geneId}}</h3>
        <span flex></span>
        <md-button class="md-icon-button" ng-click="cancel()">
          <md-icon class="material-icons" aria-label="Close dialog">close</md-icon>
        </md-button>
      </div>
    </md-toolbar>

    <md-content layout-margin layout-padding>
        <md-progress-circular ng-if="loading" md-mode="indeterminate"></md-progress-circular>

        <!--The annotation level section-->
        <section>
            <span class="editable-header">Gene Level:</span>
            <div>
                <select id="annoSelect" style="width:350px;" ng-change="annoSelectedChanged('annoSelect')" ng-model="selected">
                    <option ng-repeat="ga in geneannos" ng-selected="ga==selected">{{ga}}</option>
                </select>
            </div>
        </section>
            
        <!--The evidence_code section-->
        <section>
            <span class="editable-header">Evidence Codes</span>
            <span ng-if="is_annotated" class="pull-right">
                <label>Last annotated on: {{annotated_date}}</label>
            </span>
            <div>
                <pre>{{evidence_codes.length>0 ? evidence_codes: 'No evidence code found'}}</pre>
            </div>
            <div>
                <span class="editable-header">Enter new evidence code:</span><br>
                <input id="evc" type="text", placeholder='evidence code'></input>
                <input id="cmt" type="text", placeholder='comment'></input>
                <a ng-click="addEvdCode('evc', 'cmt')" class="no-href">Add</a>
            </div>
        </section>
        <br>

        <!--The annotation history section-->
        <section ng-if="mod_history.length>0">
            <span class="editable-header">Annotation history</span>
            <table class="popup_table">
                <tr>
                    <th>evidence_code</th><th>comment</th><th>curation</th><th>prediction</th><th>user</th><th>annotated_date</th>
                </tr>
                <tr ng-repeat="mh in mod_history">
                    <td>{{mh.evidence_code}}</td>
                    <td>{{mh.comment}}</td>
                    <td>{{mh.curation}}</td>
                    <td>{{mh.prediction}}</td>
                    <td>{{mh.user}}</td>
                    <td>{{mh.annotated_date}}</td>
                </tr>
            </table>
            <br>
        </section>

    </md-content>

    <div class="md-actions">
        <md-button ng-click="refreshChanges()">
            Confirm Change(s)
        </md-button>
        <md-button ng-if="has_changes" ng-click="submitChanges()">
            Submit
        </md-button>
        <md-button ng-click="cancel()">
            Cancel
        </md-button>
    </div>
</md-dialog>
